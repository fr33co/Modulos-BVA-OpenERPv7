<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    
			<record model="ir.actions.act_window" id="accion_proceso_nomina">
				<field name="name">Procesamiento de Nómina</field>
				<field name="res_model">hr.payslip.run</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>
			</record>

    		<!-- Vinculo para procesamiento de nóminas -->

			<record id="views_proceso_nomina" model="ir.ui.view">
				<field name="name">Procesamiento de Nómina</field>
				<field name="model">hr.payslip.run</field>
				<field name="inherit_id" ref="desarrollo_social.vista_proceso_nomina"/>
				<field name="arch" type="xml">
					<field name="fecha" position="replace">
						<field name="fecha" invisible="1"/>
					</field>

					<field name="credit_note" position="replace">
						<field name="credit_note" invisible="1"/>
					</field>

					<xpath expr="//label[@class='oe_edit_only']" position="replace">

						<label for="name" class="oe_edit_only" invisible="1"/>
						<div class="oe_horizontal_separator">
							Nombre de la nómina
						</div>
					</xpath>

					<xpath expr="//separator[@string='Payslips']" position="replace">
						<separator string="Nóminas de los Empleados"/>
					</xpath>

					<xpath expr="//field[@name='state']" position="replace">
						<field name="state" widget="statusbar"/>
					</xpath>

					<xpath expr="//button[@name='draft_payslip_run']" position="replace">
						<button string="Editar nómina" name="draft_payslip_run" type="object" states="close" icon="gtk-apply" confirm="¿Esta seguro que desea editar la nómina?"/>
					</xpath>

					<!-- Accion de botones -->
					<xpath expr="//button[@name='close_payslip_run']" position="replace">
						<button name="close_payslip_run" type="object" string="Cerrar nómina" states="draft" class="oe_highlight" confirm="¿Esta seguro que desea cerrar la nómina?" icon="gtk-apply"/>
					</xpath>

					<xpath expr="//button[@string='Generate Payslips']" position="after">

						<button name="generate_txt_slip" type="object" string="Generar diskette al banco" confirm="¿Desea generar el TXT de todos los empleados, correspondientes a la nómina?" icon="gtk-apply" attrs="{'invisible': [('state', '!=', 'close') ] }"/>

						<button name="generate_xsl_slip" type="object" string="Generar XSL" confirm="¿Desea generar el XSL de todos los empleados, correspondientes a la nómina?" icon="gtk-apply"/>

						<button name="generate_list_slip" type="object" string="Imprimir Pre-nómina" confirm="¿Desea generar el XSL de todos los empleados, correspondientes a la nómina?" icon="gtk-apply"/>
					
					</xpath>

					<field name="date_end" position="after">
						<notebook colspan="4">
	    					<page string="Características de la nómina">
	        					<newline/>
								<newline/>
								<table border="0">
									<tr>
										<td>Nómina <a href=""></a></td>
										<td>
											<field name="type_slip" widget="selection"/>
										</td>
									</tr>
									<tr>
										<td>Personal</td>
										<td>
											<field name="class_personal" widget="selection"/>
										</td>
									</tr>
									<tr>
										<td>Diario de salarios / Abono</td>
										<td>
											<field name="credit_note"/>
										</td>
									</tr>
								</table>
	    					</page>
	    					
						</notebook>
					</field>
				</field>
			</record>

			<!-- Herencia de payslip.employee -->

			<record id="views_proceso_nomina_employees" model="ir.ui.view">
				<field name="name">Generación de Nómina</field>
				<field name="model">hr.payslip.employees</field>
				<field name="inherit_id" ref="hr_payroll.view_hr_payslip_by_employees"/>
				<field name="arch" type="xml">
					<xpath expr="//button[@string='Generate']" position="replace">
						<button icon="gtk-execute" string="Generar nómina" name="compute_sheet" type="object" class="oe_highlight" confirm="¿Esta usted de acuerdo de generar la nómina?"/>
					</xpath>

					<xpath expr="//group/separator[@string='Employees']" position="replace">
						<separator string="Listado de Empleados" colspan="4"/>
					</xpath>

				</field>
			</record>

			<record model="ir.ui.view" id="slip_tree">
				<field name="name">Procesamiento de Nómina</field>
				<field name="model">hr.payslip.run</field>
				<field name="inherit_id" ref="hr_payroll.hr_payslip_run_tree"/>
				<field name="arch" type="xml">
					<field name="date_end" position="after">
						<field name="type_slip"/>
					</field>
					<field name="type_slip" position="after">
						<field name="class_personal"/>
					</field>
				</field>
			</record>
    </data>
</openerp>
