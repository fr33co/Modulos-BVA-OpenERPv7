<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
	
	<record model="ir.actions.act_window" id="accion_process_payslip_hr_views">
		<field name="name">Procesamiento de Nómina</field>
		<field name="res_model">hr.payslip.employee</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
	</record>
	
	<!-- Vinculo para procesamiento de nóminas -->

	<record id="vistas_proceso_slip_hr" model="ir.ui.view">
		<field name="name">Procesamiento de Nómina</field>
		<field name="model">hr.payslip.employee</field>
		
		<field name="arch" type="xml">
		    <form string="Nómina de empleados" version="7.0">
			<header>
			    <button name="close_payslip_run" type="object" string="Cerrar Pre nómina" states="draft" class="oe_highlight" confirm="¿Esta seguro que desea cerrar la nómina?" icon="gtk-apply"/>
			    <button string="Set to Draft" name="draft_payslip_run" type="object" states="close" />
			    <!--Boton para generar el diskette al banco-->
			    <button name="generate_txt_slip" type="object" string="Generar diskette al banco" confirm="¿Desea generar el TXT de todos los empleados, correspondientes a la nómina?" icon="gtk-apply" attrs="{'invisible': [('state', '!=', 'close') ] }" class="oe_highlight"/>
			    <button name="generate_xsl_slip" type="object" string="Generar Nómina XSL" confirm="¿Desea generar el XSL de todos los empleados, correspondientes a la nómina?" icon="gtk-apply" attrs="{'invisible': [('state', '!=', 'close') ] }" class="oe_highlight"/>
			    <!--Boton para crear listado de Pre nomina-->
			    <button name="generate_pre_slip" type="object" string="Generar Pre-nómina"  confirm="¿Desea generar el listado de la pre nómina?" icon="gtk-apply" attrs="{'invisible': [('state', '!=', 'draft') ] }" class="oe_highlight"/>
			    <!--Boton para generar la nomina-->
			    <button name="generate_pre_slip" type="object" string="Generar Nómina"  confirm="¿Desea generar el listado de la Nómina?" icon="gtk-apply" attrs="{'invisible': [('state', '!=', 'close') ] }" class="oe_highlight"/>
			    <field name="state" widget="statusbar"/>
			</header>
			<div class="oe_form_sheetbg">
			<center>
			<table border="0" style="width:800px;background-color: white;">
			    <tr>
				<td colspan="4">
				    <div class="oe_horizontal_separator">
					Nombre de la nómina
				    </div>
				</td>
			    </tr>
			    <tr>
				<td colspan="4">
				    <h2><field name="name" attrs="{'readonly': [('state', '=', 'close') ] }"/></h2>
				    <field name="user" invisible="1"/>
				</td>
			    </tr>
			    <tr>
				<td><b>Periódo desde</b></td>
				<td>
				    <field name="date_start" style="width:300%%"/>
				</td>
				<td><b>Hasta</b></td>
				<td>
				    <field name="date_end" style="width:300%%"/>
				</td>
			    </tr>
			    <tr>
				<td><b>Tipo de nómina</b></td>
				<td>
				    <field name="type_slip"/>
				</td>
				<td><b>Clasificación</b></td>
				<td>
				    <field name="class_personal"/>
				</td>
			    </tr>
			    <tr>
				<td colspan="4">
				    <notebook colspan="4">
					<page string="Empleado de la nómina">
					    <div class="div_scroll">
					    <field name="slip_ids" nolabel="1" mode="tree" domain= "[('class_personal','=',class_personal),('status','=',1)]"/>
					    </div>
					    <div style="margin-left: 600px;">
					    <table style="text-align: left;">
					    <tr>
						<td>
						    <font style="color:red;">
							<button name="mount_slip_ids" type="object" string="Monto" attrs="{'invisible': [('state', '=', 'close') ] }"/>
						    </font>
						    <font style="color:white;">--</font>
						</td>
						<td>
						    <field name="mount" style="width:65%%;"/>
						</td>
					    </tr>
					    </table>
					    </div>
					</page>
					<!--<page string="Archivos adjuntos">
					<field name="archivos"/> -->
					<!--</page>-->
				</notebook>
				</td>
			    </tr>
			</table>
			</center>
			</div>
		    </form>
		</field>
	</record>
	
	<!--colors="#0A9134:status=='1';#F2081C:status=='5';#000000:status=='2';#0000FF:status=='3';#855C11:status=='4'" toolbar="1"-->
	<record model="ir.ui.view" id="hr_payslip_employee_tree">
	    <field name="name">Procesamiento de nómina.tree</field>
	    <field name="model">hr.payslip.employee</field>
	    <field name="arch" type="xml">
		<tree string="Procesamiento de nómina" colors="blue:state=='draft';green:state=='close'">
		    <field name="name"/>
		    <field name="date_start"/>
		    <field name="date_end"/>
		    <field name="class_personal"/>
		    <field name="state"/>
		    <field name="mount"/>
		</tree>
	    </field>
	</record>
<!--
		sequence
-->		<menuitem name="Nómina" id="recursos_humanos_main" parent="hr.menu_hr_root" sequence="2"/>
        <menuitem parent="recursos_humanos_main" id="employee_payslip_hr" action="accion_process_payslip_hr_views" name="Procesamiento nóminas" icon="terp-partner" sequence="1"/>
    
    </data>
</openerp>
